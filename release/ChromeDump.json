{"name": "HashCode Addons", "html": "<script>\n\nvar __addons=['__autocompleteWithSelection'];\nvar __addonsStarted= false;\n\nfunction __toogleEnabled(name, value){\n    value= value? \"yes\":\"no\";\n    localStorage[\"__Enable__\"+name]= value;\n};\n\nfunction __addonLoader() {\n    __addonsStarted= true;\n    var div1= document.createElement('div');\n    div1.style.display=\"none\";\n    div1.id= \"__div_options\";\n    var htmlDiv=\"<TABLE>\";\n    for (var i in __addons) {\n        htmlDiv+=\"<TR><TD><INPUT type='checkbox' onclick='__toogleEnabled(\\\"\"+__addons[i]+\"\\\", this.checked);' \";\n        if (localStorage[\"__Enable__\"+__addons[i]]==\"yes\") htmlDiv+=\"checked \";\n        htmlDiv+=\"></TD><TD>\"+__addons[i].replace(\"__\", \"\")+\"</TD></TR>\";\n    };\n    htmlDiv+=\"</TABLE>\";\n    //console.log(htmlDiv);\n    div1.innerHTML=htmlDiv;\n    var img=document.createElement('img');\n    img.src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAIAAAADnC86AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACjSURBVFhH7dNBCsMwEEPRnif36c1yVe+rYBGKVpJNbALzURfNQB8E+mmjHd8T45e8QbirM/YI/K/28ZBUsJOoGA9JBTuJivGQVLCTqBgPSQU7iYrxkPQeWMh7PNsRll95dF28YDks2AXLo2XbB2971fgstru4++8UJSTGQ1LBTqJiPCQV7CQqxkNSwU6iYjwkFewkKsZD0qtgNKmiQRjNqK21H9+y+LNChwLDAAAAAElFTkSuQmCC\";\n    img.style.width=img.style.height=\"16px\";\n    img.id= \"__imageIcon\";\n    img.onclick= function(e) {\n        if (div1.style.display==\"none\") {\n            div1.style.display=\"block\";\n        } else {\n            div1.style.display=\"none\";\n        };\n    };\n    $(img).insertBefore($(\"#searchBar div a\")[0]);\n    $(div1).insertBefore(img);\n    for (var i in __addons) {\n        if (localStorage[\"__Enable__\"+__addons[i]]==\"yes\") {\n            window[__addons[i]]();\n        }\n    }\n};\n\ndocument.addEventListener( \"DOMContentLoaded\", __addonLoader, false );\nvar __check__Started= function(){\n    if (!__addonsStarted) __addonLoader();\n};\nwindow.setTimeout(__check__Started, 300);\n\n\nfunction __autocompleteWithSelection() {\n\n    var arrayUnique = function(a) { // \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\n        return a.reduce(function(p, c) {\n            if (p.indexOf(c) < 0) p.push(c);\n            return p;\n        }, []);\n    };\n    \n    // target- \u043f\u043e\u043b\u0435 \u0432\u0432\u043e\u0434\u0430, text- \u043f\u043e\u043b\u043d\u043e\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435, matchText- \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440\n    // \u0438\u043c\u0435\u044f \u043d\u0430 \u0432\u0445\u043e\u0434\u0435 \"test\" \u0438 \"te\" \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043e \"st\" te[st]\n    var completeSelection= function( target, text, matchText) {\n        target.value=target.value.substring(0, target.adduser+1)+text+target.value.substring(target.selectionEnd);\n        target.selectionStart= target.adduser+matchText.length+1;\n        target.selectionEnd  = target.adduser+text.length+1;\n        // console.log([value, target.adduser, target.selectionStart]);\n    };\n    \n    var regexUsers = new RegExp(\"<a\\\\s[^>]*href\\\\s*=\\\\s*\\\"\\/users\\/\\\\d(?![^>]*\\/(?:reputation|subscriptions)\\/)[^>]*>([\\\\s\\\\S]*?)<\\/a>\", 'ig');\n    var users = Array();\n    var usersLow= Array()\n    var regexLoginClear1= new RegExp(\"(?:^@)|\\\\s*\\u2666+\", 'ig');\n    var regexLoginClear2= new RegExp(\"<span[^>]*>([^<]+)<\\/span>\", \"ig\");\n    // \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u0430\u0445\u043e\u0434\u0438\u043c \u0432\u0441\u0435 \u043b\u043e\u0433\u0438\u043d\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0435\u0441\u0442\u044c \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u0438 \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0438\u0437 \u043d\u0438\u0445 \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0432 \u043d\u0438\u0436\u043d\u0435\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435\n    while ( (match=regexUsers.exec(document.body.innerHTML)) != null ) {\n        var userLogin= match[1].replace(regexLoginClear2, \"$1\").replace(regexLoginClear1, '');\n        usersLow.push(userLogin.toLowerCase());\n        users[userLogin.toLowerCase()]=userLogin;\n    };\n    usersLow= arrayUnique(usersLow);\n    // \u0435\u0441\u043b\u0438 \u043a\u0443\u0440\u0441\u043e\u0440 \u0443\u0448\u0435\u043b \u0432\u043b\u0435\u0432\u043e \u043e\u0442 \u0441\u043e\u0431\u0430\u043a\u0438 \u0438\u043b\u0438 \u043d\u0430 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043f\u0440\u0430\u0432\u0435\u0435, \u0442\u043e \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u0435\u043c \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c\n    $(\"textarea\").bind(\"keydown\", function(e) {\n        if (e.target.adduser>=e.target.selectionEnd || e.target.adduser+30<e.target.selectionStart) e.target.adduser= null;\n    });\n    $(\"textarea\").bind(\"keypress\", function(e){\n            // \u043d\u0430\u0436\u0430\u043b\u0438 \u0441\u043e\u0431\u0430\u043a\u0443- \u043d\u0430\u0447\u0430\u043b\u0438 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c\n            if (e.charCode==64) {\n                e.target.adduser=e.target.selectionStart;\n            }\n            // \u043f\u0440\u043e\u0431\u0435\u043b\n            if (e.charCode==32 && e.target.adduser!=null) {\n                short=e.target.value.substring(e.target.adduser+1, e.target.selectionStart).toLowerCase();\n                long= e.target.value.substring(e.target.adduser+1, e.target.selectionEnd);\n                var find= null; // \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u043e\u0438\u043a\u0430 \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435\n                nextFindIsResult= (short==\"\" && long==\"\"); // \u0434\u043b\u044f \u043f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u043c, \u0435\u0441\u043b\u0438 \u043f\u0440\u043e\u0431\u0435\u043b \u0441\u0440\u0430\u0437\u0443 \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0431\u0430\u043a\u0438, \u0438 \u043d\u0438\u0447\u0435\u043c \u043d\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u043e, \u0442\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u0435\u043c \u043f\u0435\u0440\u0432\u044b\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0438\u0437 \u043c\u0430\u0441\u0441\u0438\u0432\u0430\n                for (var i in usersLow) {\n                    if (usersLow[i]==long.toLowerCase()) {\n                        nextFindIsResult=true;\n                        continue;\n                    }\n                    if (nextFindIsResult && usersLow[i].indexOf(short)==0) { \n                        find= users[usersLow[i]];\n                        break;\n                    }\n                }\n                if (nextFindIsResult && (find==null || find==\"\")) {\n                    for (var i in usersLow) {\n                        if (usersLow[i].indexOf(short)==0) {\n                            find= users[usersLow[i]];\n                            break;\n                        }\n                    }\n                }\n                //console.log([find, long, short]);\n                if (find) { // \u0435\u0441\u043b\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u043e\u0434\u043d\u043e, \u0442\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0437\u0430\u043f\u044f\u0442\u0443\u044e \u0438 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u043c \u043a\u0443\u0440\u0441\u043e\u0440\n                    if (find==long) find+=\",\";\n                    completeSelection(e.target, find, short);\n                    if (find==long+\",\") {\n                        e.target.selectionStart=e.target.selectionEnd;\n                        return true;\n                    }\n                    return false;\n                }\n            };\n            // \u043a\u043d\u043e\u043f\u043a\u0438 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0435 \u043e\u0442 \u043f\u0440\u043e\u0431\u0435\u043b\u0430 \u0438 \u0441\u043e\u0431\u0430\u043a\u0438, \u043f\u044b\u0442\u0430\u0435\u043c\u0441\u044f \u043d\u0430\u0439\u0442\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435\n            if (e.target.adduser!=null && e.target.adduser<e.target.selectionStart) {\n                var short= (e.target.value.substring(e.target.adduser+1, e.target.selectionStart)+String.fromCharCode(e.charCode)).toLowerCase();\n                //console.log(short);\n                var find= null;\n                for (var i in usersLow) {\n                    if (usersLow[i].indexOf(short)==0) {\n                        find= users[usersLow[i]];\n                        break;\n                    }\n                }\n                if (find) {\n                    completeSelection(e.target, find, short);\n                    return false;\n                }\n            }\n        }\n    );\n};\n\n\n</script>", "urlExcludeRegex": "", "css": "", "js": "", "enabled": true, "urlRegex": "^http://((meta\\.|careers\\.|math\\.|russ\\.|admin\\.|user\\.)?hashcode|bitcode|rootcode|(games|turism|foto|hm|phys|english)?\\.sezn)\\.ru", "preserveDocWrite": true, "filters": []}